<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Nutricional - Pitaya</title>
    <style>
      /* Estilo general del cuerpo */
body {
    font-family: 'Arial', sans-serif; /* Fuente m치s limpia y profesional */
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
    background-color: #444b23; /* Fondo m치s suave */
    color: #333; /* Texto oscuro para mejor legibilidad */
}

/* Header con estilo de marca */
.header {
    text-align: center;
    padding: 20px;
    background-color: #444b23; /* Verde oscuro de Pitaya */
    color: #fff;
    margin-bottom: 20px;
    border-radius: 8px; /* Bordes redondeados suaves */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra sutil */
}

.header img {
    max-width: 150px;
    margin-bottom: 10px;
    border-radius: 50%; /* Logo circular para un toque moderno */
}

.header h1 {
    font-size: 28px; /* Tama침o de t칤tulo m치s grande */
    margin: 0;
    font-weight: 700; /* Negrita para destacar */
    text-transform: uppercase; /* May칰sculas para estilo de marca */
}

.header p {
    font-size: 14px;
    margin: 5px 0;
    font-style: italic; /* Estilo cursivo para un toque natural */
}

/* Secci칩n de nombre y apellido */
.name-section {
    margin-bottom: 20px;
    display: flex;
    gap: 10px; /* Espaciado entre campos */
    align-items: center;
}

.name-section label {
    margin-right: 10px;
    font-weight: bold;
}

.name-section input {
    width: 200px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    transition: border-color 0.3s; /* Transici칩n suave al enfocar */
}

.name-section input:focus {
    border-color: #4a704a; /* Cambio de borde al enfocar */
    outline: none; /* Eliminar outline predeterminado */
}

/* Estilo de la tabla */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Sombra m치s pronunciada */
    background-color: #fff; /* Fondo blanco para contraste */
}

th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
    font-size: 14px;
    white-space: nowrap;
}

th {
    background-color: #e0e8e0; /* Verde claro para headers */
    font-weight: 600;
}

.error {
    border-color: red;
}

#ingredientes tr:hover {
    background-color: #f0f8f0; /* Verde muy claro al pasar el rat칩n */
}

/* Estilo de inputs y selects dentro de la tabla */
input, select {
    margin: 5px;
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 80px; /* Ancho fijo para consistencia */
    text-align: center;
    transition: border-color 0.3s;
}

input:focus, select:focus {
    border-color: #4a704a;
    outline: none;
}

input[readonly] {
    background-color: #f0f0f0; /* Fondo gris para campos de solo lectura */
    cursor: not-allowed;
}

/* Botones */
button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s;
}

button:hover {
    background-color: #45a049;
}

#whatsappBtn {
    background-color: #25D366; /* Verde de WhatsApp */
}

#whatsappBtn:hover {
    background-color: #20BD57;
}

/* Textarea */
textarea {
    width: 100%;
    height: 150px;
    margin-top: 20px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-family: monospace;
    resize: vertical; /* Permitir redimensionar solo verticalmente */
    background-color: #fff;
    transition: border-color 0.3s;
}

textarea:focus {
    border-color: #4a704a;
    outline: none;
}

/* Informaci칩n de contacto */
.contact-info {
    text-align: center;
    margin-top: 20px;
    padding: 15px;
    background-color: #4a704a;
    color: #fff;
    font-size: 14px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.contact-info a {
    color: #fff;
    text-decoration: underline;
    margin: 0 10px;
    transition: color 0.3s;
}

.contact-info a:hover {
    color: #d1e7dd; /* Cambio suave al pasar el rat칩n */
}

/* Responsividad */
@media (max-width: 768px) {
    .name-section {
        flex-direction: column;
        align-items: stretch;
    }

    .name-section label {
        margin-right: 0;
        margin-bottom: 5px;
    }

    .name-section input {
        width: 100%;
        max-width: 250px;
    }

    table {
        font-size: 12px;
    }

    th, td {
        padding: 6px;
    }

    button {
        width: 100%;
        margin-bottom: 10px;
    }
}
    </style>
</head>
<body>
    <div class="header">
        <img src="logo.png" alt="Pitaya Logo">
        <h1>Pitaya | Productos nutritivos</h1>
        <p>Tienda de alimentos naturales</p>
        <p>Alimentaci칩n sana y consciente para vivir mejor游꺔</p>
        <p>Somos tu DISTRIBUIDOR NATURAL游</p>
        <p>游뚵 Env칤os a todo el pa칤s</p>
        <p>游늸 Posadas, Misiones</p>
    </div>

    <h2>Calculadora Nutricional - Pitaya</h2>
    <div class="name-section">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" placeholder="Ingresa tu nombre" required>
        <label for="apellido">Apellido:</label>
        <input type="text" id="apellido" placeholder="Ingresa tu apellido" required>
    </div>
    <table>
        <thead>
            <tr>
                <th>Ingrediente</th>
                <th>Cantidad (g)</th>
                <th>Calor칤as (kcal)</th>
                <th>Grasas (g)</th>
                <th>Prote칤nas (g)</th>
                <th>Az칰cares (g)</th>
                <th>Fibra (g)</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody id="ingredientes"></tbody>
        <tfoot>
            <tr>
                <td><strong>Totales</strong></td>
                <td><strong id="totalGramos">0</strong> g</td>
                <td><strong id="totalCalorias">0</strong> kcal</td>
                <td><strong id="totalGrasas">0</strong> g</td>
                <td><strong id="totalProteinas">0</strong> g</td>
                <td><strong id="totalAzucares">0</strong> g</td>
                <td><strong id="totalFibra">0</strong> g</td>
                <td></td>
            </tr>
        </tfoot>
    </table>
    <button id="agregarBtn">Agregar Ingrediente</button>
    <button id="exportarBtn">Exportar a CSV</button>
    <button id="whatsappBtn">Enviar a WhatsApp</button>
    <h3>Resumen para el Cliente</h3>
    <textarea id="resumen" readonly>Copia este texto para enviar al cliente...</textarea>

    <div class="contact-info">
        <p>游닐 Contacto: <a href="mailto:Pitaya.posadas@gmail.com">Pitaya.posadas@gmail.com</a></p>
        <p>游님 WhatsApp: <a href="https://api.whatsapp.com/send?phone=5493765530353">+54 9 3765 53-0353</a></p>
        <p>游닞 Instagram: <a href="https://www.instagram.com/pitayaposadas" target="_blank">pitayaposadas</a></p>
        <p>游깷 Facebook: <a href="https://www.facebook.com/profile.php?id=61573732325197" target="_blank">Pitaya Posadas</a></p>
    </div>

    <script>
        const ingredientesPredefinidos = {
            "Almendras": { calorias: 579, grasas: 50, proteinas: 21, azucares: 4.4, fibra: 13 },
            "Nueces": { calorias: 654, grasas: 65, proteinas: 15, azucares: 2.6, fibra: 7 },
            "Avellanas": { calorias: 628, grasas: 61, proteinas: 15, azucares: 4.3, fibra: 10 },
            "Casta침as de caj칰": { calorias: 553, grasas: 44, proteinas: 18, azucares: 5.9, fibra: 3 },
            "Pistachos": { calorias: 560, grasas: 45, proteinas: 20, azucares: 7.7, fibra: 10 },
            "Man칤": { calorias: 567, grasas: 49, proteinas: 26, azucares: 4.7, fibra: 9 },
            "Macadamias": { calorias: 718, grasas: 76, proteinas: 8, azucares: 4.6, fibra: 9 },
            "Nueces de Brasil": { calorias: 656, grasas: 67, proteinas: 14, azucares: 2.3, fibra: 8 },
            "Pecanas": { calorias: 691, grasas: 72, proteinas: 9, azucares: 4, fibra: 10 },
            "Casta침as": { calorias: 213, grasas: 2, proteinas: 3, azucares: 11, fibra: 8 },
            "Bellotas": { calorias: 387, grasas: 24, proteinas: 6, azucares: 10, fibra: 8 },
            "Semillas de calabaza": { calorias: 559, grasas: 49, proteinas: 30, azucares: 1.4, fibra: 6 },
            "Semillas de girasol": { calorias: 584, grasas: 51, proteinas: 21, azucares: 2.6, fibra: 9 },
            "Semillas de ch칤a": { calorias: 486, grasas: 31, proteinas: 17, azucares: 0, fibra: 34 },
            "Semillas de linaza": { calorias: 534, grasas: 42, proteinas: 18, azucares: 1.6, fibra: 27 },
            "Semillas de s칠samo": { calorias: 573, grasas: 50, proteinas: 18, azucares: 0.3, fibra: 12 },
            "Semillas de c치침amo": { calorias: 553, grasas: 49, proteinas: 32, azucares: 1.5, fibra: 4 },
            "Pi침ones": { calorias: 673, grasas: 68, proteinas: 14, azucares: 3.6, fibra: 4 },
            "Semillas de amapola": { calorias: 525, grasas: 42, proteinas: 18, azucares: 3, fibra: 20 },
            "Semillas de mel칩n": { calorias: 556, grasas: 47, proteinas: 28, azucares: 1.5, fibra: 6 },
            "Semillas de quinoa": { calorias: 368, grasas: 6, proteinas: 14, azucares: 0.9, fibra: 7 },
            "Pasas rubias": { calorias: 302, grasas: 0.5, proteinas: 3, azucares: 59, fibra: 4 },
            "Pasas morenas": { calorias: 296, grasas: 0.5, proteinas: 3, azucares: 59, fibra: 5 },
            "Pasas negras": { calorias: 296, grasas: 0.5, proteinas: 3, azucares: 59, fibra: 5 },
            "Ar치ndanos deshidratados": { calorias: 317, grasas: 0.5, proteinas: 2, azucares: 67, fibra: 7 },
            "Banana deshidratada": { calorias: 300, grasas: 0.5, proteinas: 3, azucares: 58, fibra: 8 },
            "Ma칤z tostado": { calorias: 441, grasas: 13, proteinas: 7, azucares: 1, fibra: 7 },
            "Coco en escamas": { calorias: 660, grasas: 65, proteinas: 7, azucares: 7, fibra: 16 },
            "Mel칩n deshidratado": { calorias: 325, grasas: 0.5, proteinas: 2, azucares: 70, fibra: 6 },
            "Papaya deshidratada": { calorias: 320, grasas: 0.5, proteinas: 2, azucares: 65, fibra: 5 }
        };

        document.getElementById("agregarBtn").addEventListener("click", agregarIngrediente);
        document.getElementById("exportarBtn").addEventListener("click", exportarCSV);
        document.getElementById("whatsappBtn").addEventListener("click", enviarWhatsApp);

        function agregarIngrediente() {
            const tabla = document.getElementById("ingredientes");
            const fila = tabla.insertRow();
            let opciones = '<select onchange="rellenarNutrientes(this)"><option value="">Seleccione ingrediente</option>';
            for (let ingrediente in ingredientesPredefinidos) {
                opciones += `<option value="${ingrediente}">${ingrediente}</option>`;
            }
            opciones += '</select>';

            fila.innerHTML = `
                <td>${opciones}</td>
                <td><input type="number" min="0" placeholder="Cantidad (g)" oninput="calcular()" required></td>
                <td><input type="number" step="0.1" min="0" placeholder="Calor칤as" readonly></td>
                <td><input type="number" step="0.1" min="0" placeholder="Grasas" readonly></td>
                <td><input type="number" step="0.1" min="0" placeholder="Prote칤nas" readonly></td>
                <td><input type="number" step="0.1" min="0" placeholder="Az칰cares" readonly></td>
                <td><input type="number" step="0.1" min="0" placeholder="Fibra" readonly></td>
                <td><button onclick="eliminarFila(this)">X</button></td>
            `;
        }

        function rellenarNutrientes(select) {
            const fila = select.parentElement.parentElement;
            const ingrediente = select.value;
            const datos = ingredientesPredefinidos[ingrediente] || { calorias: 0, grasas: 0, proteinas: 0, azucares: 0, fibra: 0 };
            const inputs = fila.querySelectorAll("input");

            inputs[0].value = ""; // Cantidad (editable)
            inputs[1].value = datos.calorias; // Calor칤as
            inputs[2].value = datos.grasas; // Grasas
            inputs[3].value = datos.proteinas; // Prote칤nas
            inputs[4].value = datos.azucares; // Az칰cares
            inputs[5].value = datos.fibra; // Fibra

            calcular();
        }

        function calcular() {
            const filas = document.querySelectorAll("#ingredientes tr");
            let totalGramos = 0, totalCalorias = 0, totalGrasas = 0, totalProteinas = 0, totalAzucares = 0, totalFibra = 0;

            filas.forEach(fila => {
                const select = fila.querySelector("select");
                const inputs = fila.querySelectorAll("input");
                const cantidad = parseFloat(inputs[0].value) || 0;
                const calorias = parseFloat(inputs[1].value) || 0;
                const grasas = parseFloat(inputs[2].value) || 0;
                const proteinas = parseFloat(inputs[3].value) || 0;
                const azucares = parseFloat(inputs[4].value) || 0;
                const fibra = parseFloat(inputs[5].value) || 0;

                if (!select.value || !cantidad) {
                    select.classList.add("error");
                    inputs[0].classList.add("error");
                    return;
                } else {
                    select.classList.remove("error");
                    inputs[0].classList.remove("error");
                }

                totalGramos += cantidad;
                totalCalorias += (calorias * cantidad) / 100;
                totalGrasas += (grasas * cantidad) / 100;
                totalProteinas += (proteinas * cantidad) / 100;
                totalAzucares += (azucares * cantidad) / 100;
                totalFibra += (fibra * cantidad) / 100;
            });

            document.getElementById("totalGramos").textContent = totalGramos;
            document.getElementById("totalCalorias").textContent = totalCalorias.toFixed(0);
            document.getElementById("totalGrasas").textContent = totalGrasas.toFixed(1);
            document.getElementById("totalProteinas").textContent = totalProteinas.toFixed(1);
            document.getElementById("totalAzucares").textContent = totalAzucares.toFixed(1);
            document.getElementById("totalFibra").textContent = totalFibra.toFixed(1);
            actualizarResumen();
        }

        function eliminarFila(boton) {
            boton.parentElement.parentElement.remove();
            calcular();
        }

        function exportarCSV() {
            const filas = document.querySelectorAll("#ingredientes tr");
            let csv = "Ingrediente,Cantidad (g),Calor칤as (kcal),Grasas (g),Prote칤nas (g),Az칰cares (g),Fibra (g)\n";
            filas.forEach(fila => {
                const select = fila.querySelector("select");
                const inputs = fila.querySelectorAll("input");
                csv += `${select.value},${inputs[0].value},${inputs[1].value},${inputs[2].value},${inputs[3].value},${inputs[4].value},${inputs[5].value}\n`;
            });
            csv += `Totales,${document.getElementById("totalGramos").textContent},${document.getElementById("totalCalorias").textContent},${document.getElementById("totalGrasas").textContent},${document.getElementById("totalProteinas").textContent},${document.getElementById("totalAzucares").textContent},${document.getElementById("totalFibra").textContent}`;
            
            const blob = new Blob([csv], { type: "text/csv" });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "mix_frutos_secos.csv";
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function actualizarResumen() {
            const nombre = document.getElementById("nombre").value || "Cliente";
            const apellido = document.getElementById("apellido").value || "";
            const filas = document.querySelectorAll("#ingredientes tr");
            let resumen = `Pedido de ${nombre} ${apellido}\n\n`;
            resumen += "Mix de Frutos Secos - Pitaya\n\n";
            resumen += "Ingredientes:\n";
            filas.forEach(fila => {
                const select = fila.querySelector("select");
                const inputs = fila.querySelectorAll("input");
                resumen += `- ${select.value}: ${inputs[0].value} g\n`;
            });

            resumen += "\nValores Nutricionales Totales:\n";
            resumen += `- Peso: ${document.getElementById("totalGramos").textContent} g\n`;
            resumen += `- Calor칤as: ${document.getElementById("totalCalorias").textContent} kcal\n`;
            resumen += `- Grasas: ${document.getElementById("totalGrasas").textContent} g\n`;
            resumen += `- Prote칤nas: ${document.getElementById("totalProteinas").textContent} g\n`;
            resumen += `- Az칰cares: ${document.getElementById("totalAzucares").textContent} g\n`;
            resumen += `- Fibra: ${document.getElementById("totalFibra").textContent} g\n`;
            resumen += "\nNota: Valores aproximados. Consultar a un nutricionista para precisi칩n.\n";

            document.getElementById("resumen").value = resumen;
        }

        function enviarWhatsApp() {
            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            if (!nombre || !apellido) {
                alert("Por favor, ingresa tu nombre y apellido antes de enviar.");
                return;
            }
            const resumen = document.getElementById("resumen").value;
            if (resumen === "Copia este texto para enviar al cliente...") {
                alert("Por favor, agrega al menos un ingrediente antes de enviar.");
                return;
            }
            const mensaje = encodeURIComponent(resumen);
            const whatsappUrl = `https://api.whatsapp.com/send?phone=5493765530353&text=${mensaje}`;
            window.open(whatsappUrl, '_blank');
        }
    </script>
</body>
</html>
